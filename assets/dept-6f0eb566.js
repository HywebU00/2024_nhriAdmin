import{J as A}from"./style-2d8da9a3.js";import{_ as F,u as S,m as P,r as u,o as m,c as h,b as r,t as v,d as c,e,w as l,f as R,F as V,a as B,g as T,i as C}from"./index-149a9df4.js";S();const M={components:{VTree:A},computed:{...P(B,["apiServerUrl","apiToken"])},data(){return{dialog1:!1,dialog2:!1,dialog3:!1,edidFlag:!0,selectedData:null,targetItem:null,treeData:null,headers:[{title:"帳號",key:"userId",width:30,sortable:!0,removable:!0},{title:"姓名",key:"userName",width:40,sortable:!0,removable:!0},{title:"單位",key:"deptName",width:100,sortable:!1,removable:!0},{title:"職稱",key:"jobTitle",width:50,sortable:!1,removable:!0},{title:"角色",key:"roleName",width:80,sortable:!1,removable:!0},{title:"狀態",key:"active",width:20,sortable:!1,removable:!0},{title:"編輯",key:"action",width:80,sortable:!1,removable:!0}],tableData:[],options:{},loading:!1,itemsPerPageArray:[5,30,50],currentPage:1,itemsPerPage:5,maxPage:0,totalItems:2,nodes:{},basicUsage:{}}},methods:{parentDialog(){this.dialog1=!1,this.dialog2=!1,this.dialog3=!1},handleSelectNode(o){let t=this;console.log("!!!!!!!!!!!!!!!!",o);var d=t.treeData.find(i=>i.uuid==o);console.log("!!!!!!!!!!!!!!!!",d),d.depth!="0"?(t.targetItem=d,t.edidFlag=d.depth!="1"):t.targetItem=null,console.log(t.targetItem)},organizeArray(o){const t=[],d={};return o=o.filter(function(i){return i.uuid!=="external_committee"}),o.forEach(i=>{i.parentUuid=i.parentDept?i.parentDept.uuid:null,i.title=i.depth!=0?i.deptId+i.name:i.name,i.children=[],d[i.uuid]=i}),o.sort(function(i,a){return i.depth!==a.depth?i.depth-a.depth:i.priority-a.priority}),o.forEach(i=>{const a=i.parentUuid;if(a){const g=d[a];g&&g.children.push(i)}else t.push(i)}),console.log("result ",t),t},convertToHierarchy(o){function t(d){return{title:d.name,id:d.uuid,children:d.children?d.children.map(t):[]}}return!o||o.length===0?null:t(o[0])},handleAdd(){this.$refs.basicTreeRef.insertAfter({},this.targetItem.uuid)},handleAddChild(){this.$refs.basicTreeRef.append({},this.targetItem.uuid)},handleRemove(){this.$refs.basicTreeRef.remove(this.targetItem.uuid),this.targetItem=null},getChild(){let o=this;o.loading=!0,console.log("apiToken ",this.apiToken),o.axios.get(this.apiServerUrl+"nhri/getAllDepts",{headers:{"Content-Type":"application/json",Authorization:this.apiToken}}).then(function(t){o.treeData=t.data,o.basicUsage=o.organizeArray(t.data),JSON.stringify(t.data),o.loading=!1}).catch(function(t){console.log(t)}).finally(()=>{o.loading=!1})}},mounted(){console.log("mounted dept ",this.apiToken),this.getChild()},created(){},watch:{selectedData(o){this.handleSelectNode(o)}}},E={class:"breadcrumb float-xl-end"},J={class:"breadcrumb-item"},O={class:"page-header"},H=r("small",null,null,-1),L={class:"row mb-3"},q={class:"col-xl-4"},G={key:0,class:"col-xl-8"},K={key:0},Q={key:1},W={class:"my-n1"},X=r("label",{class:"form-label",style:{"font-size":"16px"}}," 上層單位 ",-1),Y={for:"",class:"ml-4",style:{"font-size":"16px"}},Z={class:"form-label",style:{"font-size":"16px"}},j={class:"form-label",style:{"font-size":"16px"}},$={class:"form-label",style:{"font-size":"16px"}},ee={class:"form-label",style:{"font-size":"16px"}},te=r("label",{class:"form-label",style:{"font-size":"16px"}}," 描述 ",-1),le={class:"form-label",style:{"font-size":"16px"}},ae={class:"form-label",style:{"font-size":"16px"}};function oe(o,t,d,i,a,g){const I=u("panel-title"),k=u("panel-header"),D=u("VTree"),x=u("panel-body"),U=u("panel"),_=u("v-radio"),y=u("v-radio-group"),n=u("v-col"),p=u("Icon"),b=u("v-text-field"),N=u("v-autocomplete"),f=u("v-btn"),w=u("v-row");return m(),h(V,null,[r("ol",E,[r("li",J,v(o.$route.meta.parentPathName)+v(o.$route.name),1)]),r("h1",O,[c(v(o.$route.name)+" ",1),H]),r("div",L,[r("div",q,[e(U,null,{default:l(()=>[e(k,null,{default:l(()=>[e(I,null,{default:l(()=>[c(" 組織樹 ")]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(D,{ref:"basicTreeRef",data:a.basicUsage,loading:a.loading,emptyText:"",titleField:"title",keyField:"uuid",style:{"font-size":"16px"},nodeClassName:s=>`generated-class-${s.id}`,modelValue:a.selectedData,"onUpdate:modelValue":t[0]||(t[0]=s=>a.selectedData=s),selectable:""},null,8,["data","loading","nodeClassName","modelValue"])]),_:1})]),_:1})]),a.targetItem?(m(),h("div",G,[e(U,null,{default:l(()=>[e(k,null,{default:l(()=>[e(I,null,{default:l(()=>[a.edidFlag?(m(),h("span",K,"修改單位")):(m(),h("span",Q,"新增單位"))]),_:1}),r("div",W,[e(y,{modelValue:a.edidFlag,"onUpdate:modelValue":t[1]||(t[1]=s=>a.edidFlag=s),"hide-details":"auto",inline:"",density:"compact"},{default:l(()=>[e(_,{label:"修改單位",value:!0}),e(_,{label:"新增單位",value:!1})]),_:1},8,["modelValue"])])]),_:1}),e(x,null,{default:l(()=>[e(w,null,{default:l(()=>[e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[X]),_:1}),e(n,{cols:"7"},{default:l(()=>[r("label",Y,v(a.targetItem.parentUuid),1)]),_:1}),e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[r("label",Z,[e(p,{icon:"material-symbols-light:star",style:{"margin-bottom":"4",color:"red"}}),c("單位名稱 ")])]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(b,{modelValue:a.targetItem.name,"onUpdate:modelValue":t[2]||(t[2]=s=>a.targetItem.name=s),variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[r("label",j,[e(p,{icon:"material-symbols-light:star",style:{"margin-bottom":"4",color:"red"}}),c("單位代碼(二碼) ")])]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(b,{modelValue:a.targetItem.deptId,"onUpdate:modelValue":t[3]||(t[3]=s=>a.targetItem.deptId=s),variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[r("label",$,[e(p,{icon:"material-symbols-light:star",style:{"margin-bottom":"4",color:"red"}}),c("單位主管 ")])]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(N,{modelValue:a.targetItem.chief,"onUpdate:modelValue":t[4]||(t[4]=s=>a.targetItem.chief=s),variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[r("label",ee,[e(p,{icon:"material-symbols-light:star",style:{"margin-bottom":"4",color:"red"}}),c("順序 ")])]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(b,{modelValue:a.targetItem.priority,"onUpdate:modelValue":t[5]||(t[5]=s=>a.targetItem.priority=s),variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[te]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(b,{modelValue:a.targetItem.description,"onUpdate:modelValue":t[6]||(t[6]=s=>a.targetItem.description=s),variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[r("label",le,[e(p,{icon:"material-symbols-light:star",style:{"margin-bottom":"4",color:"red"}}),c("送至上層單位簽核 ")])]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(y,{modelValue:a.targetItem.upper_certify,"onUpdate:modelValue":t[7]||(t[7]=s=>a.targetItem.upper_certify=s),"hide-details":"auto",inline:"",density:"compact"},{default:l(()=>[(m(!0),h(V,null,T(o.$globalModels.getCommonArrayUtil("yesFlag"),(s,z)=>(m(),C(_,{label:s.label,value:s.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(n,{cols:"3",class:"text-right bg-light-blue-lighten-3"},{default:l(()=>[r("label",ae,[e(p,{icon:"material-symbols-light:star",style:{"margin-bottom":"4",color:"red"}}),c("狀態 ")])]),_:1}),e(n,{cols:"7"},{default:l(()=>[e(y,{modelValue:a.targetItem.status,"onUpdate:modelValue":t[8]||(t[8]=s=>a.targetItem.status=s),"hide-details":"auto",inline:"",density:"compact"},{default:l(()=>[(m(!0),h(V,null,T(o.$globalModels.getCommonArrayUtil("activeFlag"),(s,z)=>(m(),C(_,{label:s.label,value:s.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(n,{cols:"10",class:"text-right"},{default:l(()=>[e(f,{color:"blue-darken-1",variant:"elevated",onClick:g.handleAdd},{default:l(()=>[c(" addTest ")]),_:1},8,["onClick"]),e(f,{color:"blue-darken-1",variant:"elevated",onClick:g.handleAddChild},{default:l(()=>[c(" addChildTest ")]),_:1},8,["onClick"]),e(f,{color:"blue-darken-1",variant:"elevated",onClick:g.handleRemove},{default:l(()=>[c(" removeTest ")]),_:1},8,["onClick"]),e(f,{color:"blue-darken-1",variant:"elevated"},{default:l(()=>[c(" 儲存 ")]),_:1}),e(f,{color:"blue-darken-1",variant:"text"},{default:l(()=>[c(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):R("",!0)])],64)}const ne=F(M,[["render",oe]]);export{ne as default};
